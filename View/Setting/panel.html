<!--_meta 作为公共模版分离出去-->
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta name="renderer" content="webkit|ie-comp|ie-stand">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<LINK rel="Bookmark" href="/favicon.ico" >
<LINK rel="Shortcut Icon" href="/favicon.ico" />
<!--[if lt IE 9]>
<script type="text/javascript" src="lib/html5.js"></script>
<script type="text/javascript" src="lib/respond.min.js"></script>
<script type="text/javascript" src="lib/PIE_IE678.js"></script>
<![endif]-->
<link rel="stylesheet" type="text/css" href="__PUBLIC__/static/h-ui/css/H-ui.min.css" />
<link rel="stylesheet" type="text/css" href="__PUBLIC__/static/h-ui.admin/css/H-ui.admin.css" />
<link rel="stylesheet" type="text/css" href="__PUBLIC__/lib/Hui-iconfont/1.0.7/iconfont.css" />
<link rel="stylesheet" type="text/css" href="__PUBLIC__/lib/icheck/icheck.css" />
<link rel="stylesheet" type="text/css" href="__PUBLIC__/static/h-ui.admin/skin/default/skin.css" id="skin" />
<link rel="stylesheet" type="text/css" href="__PUBLIC__/static/h-ui.admin/css/style.css" />
<!--[if IE 6]>
<script type="text/javascript" src="lib/DD_belatedPNG_0.0.8a-min.js" ></script>
<script>DD_belatedPNG.fix('*');</script>
<![endif]-->
<!--/meta 作为公共模版分离出去-->

<title></title>
<style type="text/css">

.input-text:hover, .textarea:hover {
	    border: solid 1px #3bb4f2;
}
.main-table td select {
    border: 1px solid #e2e2e4;
    border-radius: 3px;
    padding: 3px 5px;
}
.form-line button {
    background: #5a98de;
    color: #fff;
    border: none;
    border-radius: 3px;
    padding: 5px 10px;
    font-size: 16px;
    margin-right: 5px;
}
.main-head {
    border-bottom: 1px solid #eff2f7;
    font-size: 16px;
    line-height: 40px;
    padding: 0 15px;
}
.bread-nav {
    background: #fafafa;
    font-size: 12px;
    border-radius: 5px;
    padding: 10px 15px;
    color: #999;
}
.bread-nav li {
    float: left;
}
.bread-nav li a{
    font-size: 15px;
}
.bread-nav i {
    margin-right: 5px;
    font-size: 14px;
}
.bread-nav:before, .bread-nav:after {
    content: "";
    display: block;
    height: 0;
    font-size: 0;
    clear: both;
    visibility: hidden;
}
</style>
</head>
<body>
<section>
<a class="btn btn-danger radius r" style="line-height:1.6em;margin-top:9px" href="{:U('setting/panel_add')}" title="刷新">添加指令</a>
<header class="main-head">panel方案模板:&nbsp&nbsp<a style="color:#148cf1!important" href="{:U('setting/panel')}">全部机型</a> <volist name="plcs"  id="plc">&nbsp&nbsp<a style="color:#148cf1!important" href="{:U('setting/panel?plcid='.$key)}">{$plc}</a></volist></header>
	<table class="table table-border table-bordered table-bg table-hover table-sort">
		<tbody>
			<thead>
				<tr>
					<td>ID</td>
					<td>PLC</td>
					<td>标识</td>
					<td>名称</td>
					<td>数据类型</td>
					<td title="0为不显示值, 1为值不变, /10表示除以10 ,arr表示数字文字转换">公式<font color="red">③</font></td>
					<td title="默认绿色 ,红色R,黄色Y,白色W ,只针对arr">单位<font color="red">④</font></td>
					<td title="是否在面板上显示">面板分组</td>
					<td>排序</td>
					
					
					<td>删除</td>		
				</tr>
			</thead>
			<tbody class="main-table">
			<volist name="now_panel" id="now">
				<tr align="left" class="over">
					<td width="50">{$now.id}</td>
					<td width="50">{$now.plcname}</td>
					<td width="50"><input type="text" name="parcode" value="{$now.parcode}" data-id="{$now.id}" size="14" class="input-text two"></td>
					<td><input type="text" name="parname" value="{$now.parname}" data-id="{$now.id}" size="14" class="input-text two"></td>
					<td>
						<select name="dbtype"  data-id="{$now.id}" class="input-text two">
							<option value="switch" <eq name="now.dbtype" value="switch">selected=""</eq> >开关量</option>
							<option value="simula" <eq name="now.dbtype" value="simula">selected=""</eq> >模拟量</option>
							</select>
					</td>
					<td><input type="text"  data-id="{$now.id}" name="formula" value="{$now.formula}" size="6" class="input-text two"></td>
					<td><input type="text"  data-id="{$now.id}" name="units" value="{$now.units}" size="20" class="input-text two"></td>
					<td>
						<select name="ishow"  data-id="{$now.id}" class="input-text two">
							<option value="0" <eq name="now.ishow" value="0">selected=""</eq>>不显示</option>
							<option value="1" <eq name="now.ishow" value="1">selected=""</eq>>参数设置</option>
							<option value="2" <eq name="now.ishow" value="2">selected=""</eq>>机组状态</option>
							<option value="3"  <eq name="now.ishow" value="3">selected=""</eq>>操作界面</option>
						</select>
					</td>
					<td><input type="text"  data-id="{$now.id}" name="seq" value="{$now.seq}" size="5" class="input-text two"></td>

					
					<td><a class="btn btn-primary" href="{:U('setting/del_panel?id='.$now['id'])}">删除</a></td>
				</tr>
			</volist>
			</tbody>
		</tbody>

					
					  
	</table>
	<br>

	<div class="page">{$page}</div>
	<br>
	<div style="padding-left: 35px;">
		<ol>
			<li>单位如: 温度℃ ; 压力: Mpa ; 容积: m³</li>
			<li><font color="red">③</font>公式: <b>0</b> 为不显示值, <b>1</b> 为值不变, <b>/10</b>	表示除以10(值可以定), <b>arr</b>为数组, <b>r</b>四舍五入, <b>f</b>舍零取整, <b>c</b>进一取整</li>
			<li><font color="red">④</font>单位显示颜色: 默认绿色 ,R红色,Y黄色,W白色,B蓝色	(只针对arr)</li>
			<!-- <li><font color="red">⑤</font>报警条件: 打勾的报警, 后面填写报警的数值, 1或0</li> -->
		</ol>
	</div>
</section>


<!--_footer 作为公共模版分离出去--> 
<script type="text/javascript" src="__PUBLIC__/lib/jquery/1.9.1/jquery.min.js"></script> 
<script type="text/javascript" src="__PUBLIC__/lib/layer/2.1/layer.js"></script> 
<script type="text/javascript" src="__PUBLIC__/lib/icheck/jquery.icheck.min.js"></script> 
<script type="text/javascript" src="__PUBLIC__/lib/jquery.validation/1.14.0/jquery.validate.min.js"></script> 
<script type="text/javascript" src="__PUBLIC__/lib/jquery.validation/1.14.0/validate-methods.js"></script> 
<script type="text/javascript" src="__PUBLIC__/lib/jquery.validation/1.14.0/messages_zh.min.js"></script> 
<script type="text/javascript" src="__PUBLIC__/static/h-ui/js/H-ui.js"></script> 
<script type="text/javascript" src="__PUBLIC__/static/h-ui.admin/js/H-ui.admin.js"></script> 
<!--/_footer /作为公共模版分离出去--> 

<!--请在下方写此页面业务相关的脚本--> 
<script type="text/javascript">
$(function(){
	$('.skin-minimal input').iCheck({
		checkboxClass: 'icheckbox-blue',
		radioClass: 'iradio-blue',
		increaseArea: '20%'
	});
	
	$("#form-admin-add").validate({
		rules:{
			adminName:{
				required:true,
				minlength:4,
				maxlength:16
			},
			password:{
				required:true,
			},
			password2:{
				required:true,
				equalTo: "#password"
			},
			sex:{
				required:true,
			},
			phone:{
				required:true,
				isPhone:true,
			},
			email:{
				required:true,
				email:true,
			},
			adminRole:{
				required:true,
			},
		},
		onkeyup:false,
		focusCleanup:true,
		success:"valid",
		submitHandler:function(form){
			$(form).ajaxSubmit();
			var index = parent.layer.getFrameIndex(window.name);
			parent.$('.btn-refresh').click();
			parent.layer.close(index);
		}
	});
});

 $(".two").change(function(){
        var id=$(this).attr("data-id");
        var val=$(this).val();
        var name=$(this).attr('name'); 
        var data={id:id,val:val,name:name};
        var url = "{:U('setting/panel_ajax')}";
            $.post(url,data).success(function(data) {
                //var data = JSON.parse(data);
                if (data==1) {
                    layer.msg('成功',{icon: 6,time:1000});
                } else {
                    layer.msg('失败',{icon: 5,time:1000});
                }
            });


 
    });

 // $(".one").change(function(){
 //        var id=I('get.planid');
 //        var val=$(this).val();
 //        var name=$(this).attr('name'); 
 //        var data={planid:id,val:val,name:name};
 //        var url = "{:U('setting/panel_ajax')}";
 //            $.post(url,data).success(function(data) {
 //                //var data = JSON.parse(data);
 //                if (data==1) {
 //                    layer.msg('成功',{icon: 6,time:1000});
 //                } else {
 //                    layer.msg('失败',{icon: 5,time:1000});
 //                }
 //            });


 
 //    });

</script> 
<!--/请在上方写此页面业务相关的脚本-->
</body>
</html>